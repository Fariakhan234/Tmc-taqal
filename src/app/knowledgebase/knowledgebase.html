
<div class="container top">
  <div class="row">
    <div class="col-12 layout align-items-center">
      <h1>Knowledge Base</h1>
      <button class="btn button me-4 " data-bs-toggle="modal" data-bs-target="#uploadModal"> Add Source
      </button>
    </div>
  </div>
</div>
<div class="input-group mt-4" style="width: 430px; height: 48px;">
  <span class="input-group-text bg-white border-end-0">
    <i class="bi bi-search me-1 fs-5"></i>
  </span>
  <input 
    type="search" 
    class="form-control border-start-0" 
    placeholder="Search" 
    aria-label="Search"
  >
</div>




<div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-white text-white">
       
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      
      <div class="modal-body">


        <div class="mb-4">
          <select class="form-select py-2">
            <option selected disabled>Select Content Type</option>
            <option>PDF</option>
            <option>Web Link</option>
            <option>Text File</option>
            <option>Web Crawl</option>
          </select>
        </div>

    
        <label for="fileInput" class="upload-box text-center py-5 rounded-3 mb-4 w-100" style="cursor: pointer;">
          <i class="bi bi-cloud-arrow-up fs-1 text-secondary mb-3 d-block"></i>
         <div *ngIf="fileName; else noFile">
    <p class="fw-semibold text-dark mb-0">{{ fileName }}</p>
    <small class="text-muted">(Ready to upload)</small>
  </div>

  <ng-template #noFile>
    <p class="mb-0">
      <span class="text-warning fw-semibold">Click here</span>
      to upload or drop files here
    </p>
  </ng-template>
          <input type="file" id="fileInput" class="d-none" multiple  
            [accept]="requiredFileType"
       (change)="onFileSelected($event)" #fileUpload
        />
        </label>

     
        <div class="d-flex justify-content-center gap-3 mb-4">
       
          <label for="fileInput" class="btn btn-outline-secondary px-4 mb-0">
            <i class="bi bi-cloud-arrow-up me-2"      (click)="fileUpload.click()"></i>Browse File
        
          </label>

          <button class="btn btn-warning text-dark px-4">
            <i class="bi bi-cloud-arrow-up me-2" (click)="fileUpload.click()"></i>New Upload
               {{fileName || "No file uploaded yet."}}

          </button>
        </div>
     


        <div class="border-top pt-3 text-muted small d-flex align-items-center justify-content-center gap-2">
          <i class="bi bi-info-circle"></i>
          <span>PDF documents will be processed and indexed for search</span>
        </div>

      </div>
    </div>
  </div>
</div>
<div class="table-responsive"*ngIf="uploadedFiles.length > 0">
<table class="table mt-5">
 <thead class="table-secondary border   ">
    <tr class="">
      <th scope="col">index</th>
      <th scope="col">filename</th>
      <th scope="col">Size</th>
         <th>type</th>
        <th scope="col">Link</th>
  
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
       <tr *ngFor="let doc of uploadedFiles , let i=index">
          <td>{{ i+1 }}</td>
                <td>{{ doc.name }}</td>
                <td>{{ doc.size }} bytes</td>
                <td>{{doc.type}}</td>
               
                <td>
                    <a [href]="doc.url" target="_blank" class="view-file-link">
                        View File

                    </a>
                </td>


                <td>
                 <button class="btn btn-outline-danger" (click)="deleteFile(doc)">
 Delete
</button>
                </td>
            </tr>
  </tbody>
</table></div>